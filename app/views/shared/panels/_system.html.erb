<div id="panel-1" class="panel panel-success">
  <div class="panel-heading portlet-handler">
    <div class="row row-table row-flush">
      <div class="col-xs-8">
        <p class="mb0">SYSTEM</p>
        <h3 class="m0"><%= service.name -%></h3>
      </div>
      <div class="col-xs-4 text-center">
        <em class="fa fa-hdd-o fa-2x"></em>
      </div>
    </div>
  </div>
  <div class="panel-body">
    <!-- Bar chart-->
    <div class="text-center">
      <div data-stacked-bar-color="#6AB550,#4B7F38,black" data-zero-color="#CCCCCC" data-null-color="#FFFFFF" data-height="30" data-bar-width="6" data-bar-spacing="6" class="inlinesparkline inline"><%= service.events.order_by(:created_at.desc).limit(34).map{|e| "#{e[:system][:load][:avg01].to_f.round(2)}:#{e[:system][:load][:avg05].to_f.round(2)}:#{e[:system][:load][:avg15].to_f.round(2)}" unless e[:system].nil?}.compact.join(',') -%></div>
      <div style="height:20px;"></div>
      <div data-bar-color="<%= bar_color(service.current_event) %>" data-height="30" data-bar-width="6" data-bar-spacing="6" class="inlinesparkline inline"><%= service.events.order_by(:created_at.desc).limit(34).map{|e| e[:system][:cpu][:user].to_f.round(2) unless e[:system].nil?}.compact.join(',') -%></div>
      <div style="height:20px;"></div>
      <div data-stacked-bar-color="#6AB550,#4B7F38" data-zero-color="#CCCCCC" data-null-color="#FFFFFF" data-height="30" data-bar-width="6" data-bar-spacing="6" class="inlinesparkline inline"><%= service.events.order_by(:created_at.desc).limit(34).map{|e| "#{e[:system][:memory][:percent].to_f.round}:#{e[:system][:swap][:percent].to_f.round}" unless e[:system].nil?}.compact.join(',') -%></div>
    </div>
  </div>
  <div class="panel-footer"><i class="fa fa-star-o add-favorite"></i><span class="pull-right">See more &nbsp; <i class="fa fa-external-link"></i></span></div>
</div>
