<div id="<%= portlet.id -%>" class="panel panel-<%= panel_color(portlet.current_service) %>" data-id="<%= portlet.id -%>">
  <div class="panel-heading portlet-handler">
    <em class="fa fa-gear"></em> <%= portlet.name -%>
    <a href="javascript:void(0);" data-perform="panel-collapse" data-toggle="tooltip" title="" class="pull-right" data-original-title="Collapse Panel">
      <em class="fa fa-minus"></em>
    </a>
  </div>
  <div class="panel-body">
    <!-- Bar chart-->
    <div class="text-center" style="position:relative;overflow:hidden;">
      <% unless portlet.services.count == 0 %>
      <div data-tooltip-chart-title="Memory" data-tooltip-suffix="%" data-chart-range-min="0" data-bar-color="<%= bar_color(portlet.current_service) %>" data-zero-color="#CCCCCC" data-null-color="#FFFFFF" data-height="30" data-bar-width="6" data-bar-spacing="6" data-bar-spread="true" class="inlinesparkline inline"><%= portlet.services.order_by(:created_at.desc).limit(30).map{|e| "#{e[:memory].nil? ? 0 : e.memory[:percent].to_f.round(1)}" }.compact.join(',') -%></div>
      <div style="height:20px;"></div>
      <div data-tooltip-chart-title="CPU" data-tooltip-suffix="%" data-chart-range-min="0" data-bar-color="<%= bar_color(portlet.current_service) %>" data-zero-color="#CCCCCC" data-null-color="#FFFFFF" data-height="30" data-bar-width="6" data-bar-spacing="6" data-bar-spread="true" class="inlinesparkline inline"><%= portlet.services.order_by(:created_at.desc).limit(30).map{|e| "#{e[:cpu].nil? ? 0 : e.cpu[:percent].to_f.round(1)}" }.compact.join(',') -%></div>
      <% end %>
    </div>
  </div>
  <div class="panel-footer"><i class="fa fa-star-o add-favorite"></i><span class="pull-right">See more &nbsp; <i class="fa fa-external-link"></i></span></div>
</div>
